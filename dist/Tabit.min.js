!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Tabit=e():t.Tabit=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i(this,t),!t._isDom(e))throw new TypeError("`new Tabit` requires a DOM element as its first argument.");var s=t._cacheGet(e);if(s)return s;var r=o.buttonSelector,a=void 0===r?"a":r,c=o.contentSelector,u=void 0===c?"div":c,l=o.buttonAttribute,h=void 0===l?"href":l,f=o.contentAttribute,v=void 0===f?"id":f,y=o.buttonActiveClass,b=void 0===y?null:y,d=o.contentActiveClass,p=void 0===d?null:d,_=o.event,g=void 0===_?"click":_,m=o.activeIndex,k=void 0===m?0:m,T=o.toggleDisplay,S=void 0===T||T,A=o.closable,E=void 0!==A&&A,w=o.beforeInit,D=void 0===w?null:w,x=o.onInit,C=void 0===x?null:x,I=o.beforeChange,j=void 0===I?null:I,M=o.onChange,O=void 0===M?null:M,L=o.onDestroy,N=void 0===L?null:L;this.settings={buttonSelector:a,contentSelector:u,buttonAttribute:h,contentAttribute:v,buttonActiveClass:b,contentActiveClass:p,event:g,activeIndex:k,toggleDisplay:S,closable:E,beforeInit:D,onInit:C,beforeChange:j,onChange:O,onDestroy:N},this._checkSettings(),this.element=e,this.tabs=[],this._activeTab=null;var H=this.element.querySelectorAll(this.settings.buttonSelector);H=Array.prototype.slice.call(H);var q=this.element.querySelectorAll(this.settings.contentSelector);q=Array.prototype.slice.call(q);var G=function(t){var e=t.getAttribute(h),n=!1;return!!e&&("href"===h&&(e=e.replace(/^#/g,"")),q.some(function(t,i,o){return t.getAttribute(v)===e&&(n=o[i],o.splice(i,1),n)}),n)};return H.forEach(function(t){var e=G(t);e&&n.tabs.push({button:t,content:e})}),this._eventHandlerShim=function(t){n._eventHandler(t)},this._bindEvents(),D&&"function"==typeof D&&D.call(this,this),this._initState(),t._cacheSet(e,this),C&&"function"==typeof C&&C.call(this,this),this}return s(t,[{key:"setActiveTab",value:function(t){this._checkDestroyed();var e=this.tabs[t];return!!e&&(this._runTabEvent(null,e),!0)}},{key:"getActiveTab",value:function(){return this._checkDestroyed(),this._activeTab}},{key:"getActiveTabIndex",value:function(){return this._checkDestroyed(),this.tabs.indexOf(this._activeTab)}},{key:"getTab",value:function(t){return this._checkDestroyed(),this.tabs[t]}},{key:"next",value:function(){this._checkDestroyed(),this._paginate()}},{key:"prev",value:function(){this._checkDestroyed(),this._paginate(!0)}},{key:"destroy",value:function(){var e=this;this._checkDestroyed();var n=this.settings.onDestroy,i=this.settings.buttonActiveClass,o=this.settings.contentActiveClass,s=this.settings.toggleDisplay;this._unbindEvents(),this.tabs.forEach(function(t){i&&t.button.classList.remove(i),o&&t.content.classList.remove(o),s&&(t.content.style.display="")}),t._cacheRemove(this.element),Object.keys(this).forEach(function(t){delete e[t]}),n&&"function"==typeof n&&n(),this._destroyed=!0}},{key:"_checkSettings",value:function(){var t=this;["beforeInit","onInit","beforeChange","onChange","onDestroy"].forEach(function(e){if(t.settings[e]&&"function"!=typeof t.settings[e])throw new TypeError("`"+e+"` parameter must be a function.")})}},{key:"_eventHandler",value:function(e){var n=e.target;if(!n)return null;for(var i=this.tabs,o=void 0;n!==this.element&&!o;){if(t._domMatches(n,this.settings.buttonSelector))for(var s=0,r=i.length;s<r;s+=1)if(n===i[s].button){o=i[s];break}if(!n.parentNode)return null;n=n.parentNode}return o?this._runTabEvent(e,o):null}},{key:"_runTabEvent",value:function(t,e){if(e){t&&t.preventDefault();var n=e,i=this._activeTab,o=this.settings.beforeChange,s=this.settings.onChange,r=this.settings.closable,a=n===i;a&&!r||(o&&"function"==typeof o&&o.call(this,i,n,this),a&&r?(this._hideTab(i),this._activeTab=null):(this._hideTab(i),this._showTab(n)),s&&"function"==typeof s&&s.call(this,n,this))}}},{key:"_bindEvents",value:function(){this._setEvents()}},{key:"_unbindEvents",value:function(){this._setEvents(!0)}},{key:"_setEvents",value:function(t){var e=this,n=this.settings.event,i=t?"removeEventListener":"addEventListener";"string"==typeof n?this.element[i](n,this._eventHandlerShim):Array.isArray(n)&&n.forEach(function(t){e.element[i](t,e._eventHandlerShim)})}},{key:"_initState",value:function(){var t=this.settings.activeIndex;this.settings.toggleDisplay&&this.tabs.forEach(function(e,n){n!==t&&(e.content.style.display="none")}),t>=0&&this._runTabEvent(null,this.tabs[t])}},{key:"_hideTab",value:function(t){this._toggleTab(t,!0)}},{key:"_showTab",value:function(t){this._toggleTab(t)}},{key:"_toggleTab",value:function(t,e){if(t){var n=e?"remove":"add",i=this.settings.buttonActiveClass,o=this.settings.contentActiveClass;this.settings.toggleDisplay&&(t.content.style.display=e?"none":""),i&&t.button.classList[n](i),o&&t.content.classList[n](o),e||(this._activeTab=t)}}},{key:"_paginate",value:function(t){if(this._activeTab){var e=this.tabs.indexOf(this._activeTab),n=this.tabs.length-1,i=void 0,o=void 0,s=void 0;t?(s=-1,o=0===e):(s=1,o=e===n),i=o?t?n:0:e+s,this.setActiveTab(i)}}},{key:"_checkDestroyed",value:function(){if(this._destroyed)throw Error("Tabit instance destroyed")}}],[{key:"_domMatches",value:function(t,e){var n=window.Element.prototype,i=n.matches||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;if(!t||1!==t.nodeType)return!1;var o=t.parentNode;if(i)return i.call(t,e);for(var s=o.querySelectorAll(e),r=s.length,a=0;a<r;a++)if(s[a]===t)return!0;return!1}},{key:"_isDom",value:function(t){return!(!t||"object"!==(void 0===t?"undefined":o(t)))&&("object"===("undefined"==typeof window?"undefined":o(window))&&"object"===o(window.Node)?t instanceof window.Node:"number"==typeof t.nodeType&&"string"==typeof t.nodeName)}},{key:"_cacheSet",value:function(e,n){t._cacheRemove(e),t._cache.push({key:e,value:n})}},{key:"_cacheGet",value:function(e){for(var n=0,i=t._cache.length;n<i;n+=1){var o=t._cache[n];if(o.key===e)return o.value}return null}},{key:"_cacheRemove",value:function(e){for(var n=0,i=t._cache.length;n<i;n+=1){if(t._cache[n].key===e)return void t._cache.splice(n,1)}}},{key:"getInstance",value:function(t){return this._cacheGet(t)}}]),t}();r._cache=[],t.exports=r}])});