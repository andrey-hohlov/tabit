/*!
 * Tab it! - just tabs. Make it where you want.
 * https://github.com/andrey-hohlov/tabit
 * @license MIT licensed
 */
!function(t){"use strict";function e(t,e){this.defaults={tabSelector:"a",contentSelector:"div",tabAttr:"href",contentAttr:"id",tabActiveClass:"is-active",contentActiveClass:"is-active",tabEvent:"click",active:1,toggleDisplay:!0,closable:!1},this.options=this._extend({},this.defaults,e),this.elem=t,this.tabsArr=this.elem.querySelectorAll(this.options.tabSelector),this.contentArr=this.elem.querySelectorAll(this.options.contentSelector),this.tabsArr=Array.prototype.slice.call(this.tabsArr,0),this.contentArr=Array.prototype.slice.call(this.contentArr,0);var s=this;this.eventHandlerWrap=function(t){s.eventHandler(this,t)},this.fixOptions(),this.bindEvents();var n=parseInt(this.options.active)-1;this.options.toggleDisplay&&this.contentArr.forEach(function(t,e){e!==n&&(t.style.display="none")}),n&&this._trigger(this.tabsArr[n],this.options.tabEvent)}e.prototype.eventHandler=function(t,e){e.preventDefault();var s=this.options.tabAttr,n=this.options.tabActiveClass,i=this.options.contentActiveClass,o=this.options.before,r=this.options.after,a=this._hasClass(t,n);if(this.options.closable||!a){var c,l=t.getAttribute(s);"href"==s&&(l=l.replace("#","")),c=this.findContent(l),o&&"function"==typeof o&&o(t,c),this.clearActiveTab(),this.clearActiveContent(),this.options.closable&&a||(this._addClass(t,n),c&&(this._addClass(c,i),this.options.toggleDisplay&&(c.style.display="block"))),r&&"function"==typeof r&&r(t,c)}},e.prototype.bindEvents=function(){var t=this;this.tabsArr.forEach(function(e,s,n){e.addEventListener(t.options.tabEvent,t.eventHandlerWrap)})},e.prototype.unbindEvents=function(){var t=this;t.tabsArr.forEach(function(e,s,n){e.removeEventListener(t.options.tabEvent,t.eventHandlerWrap)})},e.prototype.clearActiveTab=function(){var t=this,e=t.options.tabActiveClass;Array.prototype.some.call(t.tabsArr,function(s,n,i){if(t._hasClass(s,e))return t._removeClass(s,e),!0})},e.prototype.findContent=function(t){var e=this,s=e.options.contentAttr,n=null;return Array.prototype.some.call(e.contentArr,function(e,i,o){if(e.getAttribute(s)==t)return n=o[i],o[i]}),n},e.prototype.clearActiveContent=function(){var t=this,e=t.options.contentActiveClass;Array.prototype.some.call(t.contentArr,function(s,n,i){if(t._hasClass(s,e))return t._removeClass(s,e),t.options.toggleDisplay&&(s.style.display="none"),!0})},e.prototype.destroy=function(){this.unbindEvents(),this.clearActiveTab(),this.clearActiveContent()},e.prototype.fixOptions=function(){var t=this.options.active,e=this.tabsArr.length;t>e&&(this.options.active=1)},e.prototype._extend=function(t){t=t||{};for(var e=1;e<arguments.length;e++){var s=arguments[e];if(s)for(var n in s)s.hasOwnProperty(n)&&("object"==typeof s[n]?t[n]=this._extend(t[n],s[n]):t[n]=s[n])}return t},e.prototype._removeClass=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},e.prototype._addClass=function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},e.prototype._hasClass=function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},e.prototype._trigger=function(t,e){var s=document.createEvent("HTMLEvents");s.initEvent(e,!1,!0),t.dispatchEvent(s)},"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:t.Tabit=e}(this);